(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,function(t,e,c){t.exports={item:"CartItem_item__1DBdo",details:"CartItem_details__3un3X",quantity:"CartItem_quantity__QwUwh",price:"CartItem_price__2WLED",itemprice:"CartItem_itemprice__1AIHd",actions:"CartItem_actions__2fo1C"}},,,function(t,e,c){t.exports={item:"ProductItem_item__Ftp37",price:"ProductItem_price__23IMs",actions:"ProductItem_actions__1uff2"}},function(t,e,c){t.exports={notification:"Notification_notification__2r0Fo",error:"Notification_error__1SK7q",success:"Notification_success__E-pfx"}},,,function(t,e,c){t.exports={button:"CartButton_button__3jdqc",badge:"CartButton_badge__35Mnj"}},,function(t,e,c){t.exports={card:"Card_card__1av73"}},function(t,e,c){t.exports={cart:"Cart_cart__31hOF"}},function(t,e,c){t.exports={header:"MainHeader_header__3x1yi"}},function(t,e,c){t.exports={products:"Products_products__Vk75L"}},,,,,,,,,,,function(t,e,c){},,function(t,e,c){"use strict";c.r(e);var i=c(5),a=c.n(i),s=c(2),r=c(4);const n=Object(r.b)({name:"show-cart",initialState:{isShowCart:!1,notification:null},reducers:{toggleShowCart(t){t.isShowCart=!t.isShowCart},showNotification(t,e){t.notification={status:e.payload.status,title:e.payload.title,message:e.payload.message}}}}),o=n.actions;var d=n;const l=Object(r.b)({name:"item",initialState:{items:[],totalQuantity:0,changed:!1},reducers:{replaceItem(t,e){t.items=e.payload.items,t.totalQuantity=e.payload.totalQuantity},addItem(t,e){t.totalQuantity++,t.changed=!0;const c=e.payload,i=t.items.find((t=>t.id===c.id));i?(i.quantity++,i.totalPrice=i.totalPrice+i.price):t.items.push({id:c.id,price:c.price,quantity:1,totalPrice:c.price,name:c.title})},removeItem(t,e){t.totalQuantity--,t.changed=!0;const c=e.payload,i=t.items.find((t=>t.id===c));1===i.quantity?t.items=t.items.filter((t=>t.id!==c)):(i.quantity--,i.totalPrice=i.totalPrice-i.price)}}}),j=l.actions;var u=l;var b=Object(r.a)({reducer:{cartVisible:d.reducer,cart:u.reducer}}),h=(c(26),c(1));const m=()=>async t=>{try{const e=await(async()=>{const t=await fetch("https://react-http-2bc42-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json");if(!t.ok)throw new Error("Fetching data failed...");return await t.json()})();t(j.replaceItem({items:e.items||[],totalQuantity:e.totalQuantity}))}catch(e){t(o.showNotification({status:"error",title:"Error!",message:"Sending cart data failed!"}))}},p=t=>async e=>{e(o.showNotification({status:"pending",title:"Sending...",message:"Sending cart data!"}));try{await(async()=>{if(!(await fetch("https://react-http-2bc42-default-rtdb.asia-southeast1.firebasedatabase.app/cart.json",{method:"PUT",body:JSON.stringify({items:t.items,totalQuantity:t.totalQuantity})})).ok)throw new Error("");e(o.showNotification({status:"success",title:"Success",message:"Sent cart data successfully!"}))})()}catch(c){e(o.showNotification({status:"error",title:"Error!",message:"Sending cart data failed!"}))}};var O=c(12),x=c.n(O),_=c(0);var f=t=>Object(_.jsx)("section",{className:"".concat(x.a.card," ").concat(t.className?t.className:""),children:t.children}),y=c(13),g=c.n(y),N=c(3),v=c.n(N);var w=t=>{const e=Object(s.b)(),{id:c,title:i,quantity:a,total:r,price:n}=t.item;return Object(_.jsxs)("li",{className:v.a.item,children:[Object(_.jsxs)("header",{children:[Object(_.jsx)("h3",{children:i}),Object(_.jsxs)("div",{className:v.a.price,children:["$",r.toFixed(2)," ",Object(_.jsxs)("span",{className:v.a.itemprice,children:["($",n.toFixed(2),"/item)"]})]})]}),Object(_.jsxs)("div",{className:v.a.details,children:[Object(_.jsxs)("div",{className:v.a.quantity,children:["x ",Object(_.jsx)("span",{children:a})]}),Object(_.jsxs)("div",{className:v.a.actions,children:[Object(_.jsx)("button",{onClick:()=>{e(j.removeItem(c))},children:"-"}),Object(_.jsx)("button",{onClick:()=>{e(j.addItem({id:c,price:n,title:i}))},children:"+"})]})]})]})};var C=t=>{const e=Object(s.c)((t=>t.cart.items)),c=e.length>0&&e.map((t=>Object(_.jsx)(w,{item:{id:t.id,title:t.name,quantity:t.quantity,total:t.totalPrice,price:t.price}},t.id)));return Object(_.jsxs)(f,{className:g.a.cart,children:[Object(_.jsx)("h2",{children:"Your Shopping Cart"}),Object(_.jsx)("ul",{children:c})]})},I=c(10),S=c.n(I);var k=t=>{const e=Object(s.c)((t=>t.cart.totalQuantity)),c=Object(s.b)();return Object(_.jsxs)("button",{onClick:()=>{c(o.toggleShowCart())},className:S.a.button,children:[Object(_.jsx)("span",{children:"My Cart"}),Object(_.jsx)("span",{className:S.a.badge,children:e})]})},q=c(14),P=c.n(q);var Q=t=>Object(_.jsxs)("header",{className:P.a.header,children:[Object(_.jsx)("h1",{children:"ReduxCart"}),Object(_.jsx)("nav",{children:Object(_.jsx)("ul",{children:Object(_.jsx)("li",{children:Object(_.jsx)(k,{})})})})]});var F=t=>Object(_.jsxs)(h.Fragment,{children:[Object(_.jsx)(Q,{}),Object(_.jsx)("main",{children:t.children})]}),E=c(6),B=c.n(E);var D=t=>{const{id:e,title:c,price:i,description:a}=t,r=Object(s.b)();return Object(_.jsx)("li",{className:B.a.item,children:Object(_.jsxs)(f,{children:[Object(_.jsxs)("header",{children:[Object(_.jsx)("h3",{children:c}),Object(_.jsxs)("div",{className:B.a.price,children:["$",i.toFixed(2)]})]}),Object(_.jsx)("p",{children:a}),Object(_.jsx)("div",{className:B.a.actions,children:Object(_.jsx)("button",{onClick:()=>{r(j.addItem({id:e,price:i,title:c}))},children:"Add to Cart"})})]})})},M=c(15),V=c.n(M);const J=[{id:"p1",price:6,title:"First book",description:"Description of first book"},{id:"p2",price:5,title:"Second book",description:"Description of second book"}];var $=t=>Object(_.jsxs)("section",{className:V.a.products,children:[Object(_.jsx)("h2",{children:"Buy your favorite products"}),Object(_.jsx)("ul",{children:J.map((t=>Object(_.jsx)(D,{id:t.id,title:t.title,price:t.price,description:t.description},t.id)))})]}),A=c(7),H=c.n(A);var L=t=>{let e="";"error"===t.status&&(e=H.a.error),"success"===t.status&&(e=H.a.success);const c="".concat(H.a.notification," ").concat(e);return Object(_.jsxs)("section",{className:c,children:[Object(_.jsx)("h2",{children:t.title}),Object(_.jsx)("p",{children:t.message})]})};let U=!0;var K=function(){const t=Object(s.c)((t=>t.cartVisible.isShowCart)),e=Object(s.c)((t=>t.cartVisible.notification)),c=Object(s.c)((t=>t.cart)),i=Object(s.b)();return Object(h.useEffect)((()=>{i(m())}),[i]),Object(h.useEffect)((()=>{U?U=!1:c.changed&&i(p(c))}),[c,i]),Object(_.jsxs)(h.Fragment,{children:[e&&Object(_.jsx)(L,{status:e.status,title:e.title,message:e.message}),Object(_.jsxs)(F,{children:[t&&Object(_.jsx)(C,{}),Object(_.jsx)($,{})]})]})};a.a.render(Object(_.jsx)(s.a,{store:b,children:Object(_.jsx)(K,{})}),document.getElementById("root"))}],[[28,1,2]]]);
//# sourceMappingURL=main.02012a54.chunk.js.map